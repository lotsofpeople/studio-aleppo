<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="aleppo-styles.html">
<link rel="import" href="aleppo-image-behavior.html">

<!--
`aleppo-citizen-card`


@demo demo/aleppo-citizen-card.html
-->

<dom-module id="aleppo-citizen-card">
  <template>
    <style>
      :host {
        display: flex;
      }

      section {
        flex: 1;
        position: relative;
        overflow: hidden;
        background-color: black;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      figure {
        position: absolute;
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
        left: 0;
        transition: filter 0.2s;
      }

      :host([anonymous]) figure {
        filter: blur(20px);
      }

      @media screen and (min-width: 1025px) {
        :host(:hover) figure {
          filter: blur(20px);
        }        
      }

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: 50% 50%;
      }

      blockquote {
        position: absolute;
        display: inline-flex;
        top: 27px;
        left: 27px;
        right: 27px;
        bottom: 27px;
        color: white;
        margin: 0;
        opacity: 0;
        transition: opacity 0.2s;
        @apply --aleppo-font-quote;
        color: white;
      }

      blockquote span:before,
      blockquote span:after {
        content: ' â€” ';
      }

      :host([anonymous]) blockquote {
        opacity: 1;
      }

      @media screen and (min-width: 1025px) {
        :host(:hover) blockquote {
          opacity: 1;
        }        
      }

      [hidden] {
        display: none!important;
      }

      h1 {
        flex: none;
        display: inline-block;
        box-sizing: border-box;
        background-color: var(--aleppo-color-yellow);
        height: 32px;
        display: flex;
        padding: 0 12px;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 1;
        margin: 32px;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply --aleppo-font-small;
        color: var(--aleppo-color-blue);
      }

      :host([anonymous]) h1 {
        opacity: 0;
      }

      @media screen and (min-width: 1025px) {
        :host(:hover) h1 {
          opacity: 0;
        }        
      }

    </style>

    <section>
      <figure>
        <img src="[[image]]">
      </figure>
      <blockquote><span>[[quote]]</span></blockquote>
      <h1>[[citizenName]]</h1>
    </section>

  </template>

  <script>
    Polymer({

      is: 'aleppo-citizen-card',
      
      behaviors: [
        AleppoImageBehavior
      ],
      
      properties: {
        
        citizenName: {
          type: String,
        },
        
        quote: {
          type: String
        },
        
        image: {
          type: String
        },

        anonymous: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        }

      },

    });
  </script>
</dom-module>