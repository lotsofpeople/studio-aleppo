<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="aleppo-styles.html">
<link rel="import" href="aleppo-image-behavior.html">

<!--
`aleppo-citizen-card`


@demo demo/aleppo-citizen-card.html
-->

<dom-module id="aleppo-citizen-card">
  <template>
    <style>
      :host {
        display: flex;
        position: relative;
      }

      #container {
        /* padding-top: 143%; */
        width: 100%;
        position: relative;
      }

      section {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        background-color: black;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      figure {
        position: absolute;
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
        left: 0;
        top: 0;
        transition: filter 0.2s;
      }

      :host([anonymous]) figure {
        filter: blur(12px);
      }

      @media screen and (min-width: 1025px) {
        :host:not([anonymous]):hover figure {
          filter: blur(12px);
        }        
      }

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: 50% 20%;
      }

      blockquote {
        position: absolute;
        display: inline-flex;
        top: 16px;
        left: 16px;
        right: 16px;
        bottom: 16px;
        color: white;
        margin: 0 auto;
        opacity: 0;
        transition: opacity 0.2s;
        @apply --aleppo-font-quote;
        color: white;
      }

      @media screen and (min-width: 1025px) {
        blockquote {
          top: 27px;
          left: 27px;
          right: 27px;
          bottom: 27px;
        }        
      }

      :host([large-quote]) blockquote {
        position: absolute;        
        top: 20px;
        bottom: 0;
        left: 50%;
        font-size: var(--font-size-heading2);
        transform: translateX(-50%);
        width: 100%;
        box-sizing: border-box;
        padding: 0 16px;                   
      }
      
      :host([large-quote]) blockquote span {
        max-width: 750px;
      }
      
      blockquote span:before,
      blockquote span:after {
        content: ' â€” ';
      }

      :host([anonymous]) blockquote {
        opacity: 1;
      }

      @media screen and (min-width: 1025px) {
        :host(:hover) blockquote {
          opacity: 1;
        }        
      }

      @media screen and (min-width: 737px) {
        :host([large-quote]) blockquote {
          top: 64px;
          bottom: 0;
          left: 50%;
          width: 100%;
          max-width: 1296px; 
          padding: 0 16px;
          transform: translateX(-50%);
        }
      }

      [hidden] {
        display: none!important;
      }

      h1 {
        flex: none;
        display: inline-block;
        box-sizing: border-box;
        background-color: var(--aleppo-color-yellow);
        height: 32px;
        display: flex;
        padding: 0 16px;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 1;
        margin: 32px;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply --aleppo-font-small;
        color: var(--aleppo-color-blue);
      }

      :host([anonymous]) h1 {
        opacity: 0;
      }

      @media screen and (min-width: 1025px) {
        :host(:hover) h1 {
          opacity: 0;
        }        
      }

    </style>

    <div id="container">
    <section>
      <figure>
        <img src="[[image]]">
      </figure>
      <blockquote><span>[[quote]]</span></blockquote>
      <h1>[[citizenName]]</h1>
    </section>
  </div>

  </template>

  <script>
    Polymer({

      is: 'aleppo-citizen-card',
      
      behaviors: [
        AleppoImageBehavior
      ],
      
      properties: {
        
        citizenName: {
          type: String,
        },
        
        quote: {
          type: String
        },
        
        image: {
          type: String
        },

        anonymous: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },

        largeQuote: {
          type: Boolean,
          value: false
        }

      },

    });
  </script>
</dom-module>
